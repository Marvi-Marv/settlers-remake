<?xml version="1.1" encoding="UTF-8"?>
<!DOCTYPE building SYSTEM "../building.dtd">
<building worker="FARMER" workradius="6">
	<ground groundtype="GRASS"/>
	<ground groundtype="EARTH"/>
	<ground groundtype="FLATTENED"/>

	<blocked dx="-3" dy="1" block="true" />
	<blocked dx="-3" dy="0" block="true" />
	<blocked dx="-4" dy="-3" block="true" />
	<blocked dx="-4" dy="-2" block="true" />
	<blocked dx="-3" dy="-1" block="true" />
	<blocked dx="-3" dy="-2" block="true" />
	<blocked dx="-2" dy="-2" block="true" />
	<blocked dx="-3" dy="-3" block="true" />
	<blocked dx="-4" dy="-4" block="true" />
	<blocked dx="-2" dy="-4" block="true" />
	<blocked dx="-1" dy="-3" block="true" />
	<blocked dx="1" dy="-1" block="true" />
	<blocked dx="2" dy="-1" block="true" />
	<blocked dx="3" dy="0" block="true" />
	<blocked dx="4" dy="1" block="true" />
	<blocked dx="2" dy="0" block="true" />
	<blocked dx="2" dy="1" block="true" />
	<blocked dx="3" dy="3" block="true" />
	<blocked dx="2" dy="3" block="true" />
	<blocked dx="2" dy="2" block="true" />
	<blocked dx="1" dy="0" block="true" />
	<blocked dx="1" dy="1" block="true" />
	<blocked dx="1" dy="2" block="true" />
	<blocked dx="1" dy="3" block="true" />
	<blocked dx="1" dy="4" block="true" />
	<blocked dx="0" dy="-2" block="true" />
	<blocked dx="0" dy="-1" block="true" />
	<blocked dx="0" dy="0" block="true" />
	<blocked dx="0" dy="1" block="true" />
	<blocked dx="0" dy="2" block="true" />
	<blocked dx="0" dy="3" block="true" />
	<blocked dx="-1" dy="-2" block="true" />
	<blocked dx="-1" dy="-1" block="true" />
	<blocked dx="-1" dy="0" block="true" />
	<blocked dx="-1" dy="1" block="true" />
	<blocked dx="-1" dy="2" block="true" />
	<blocked dx="-2" dy="-1" block="true" />
	<blocked dx="-2" dy="0" block="true" />
	<blocked dx="-2" dy="1" block="true" />
	<blocked dx="-2" dy="2" block="true" />
	<blocked dx="-2" dy="-3" block="true" />
	<blocked dx="-3" dy="-4" block="true" />
	<blocked dx="-4" dy="-5" block="true" />
	<blocked dx="-3" dy="-5" block="true" />
	<blocked dx="1" dy="6" block="true" />
	<blocked dx="0" dy="5" block="true" />
	<blocked dx="1" dy="5" block="true" />
	<blocked dx="0" dy="4" block="true" />
	<blocked dx="-4" dy="-1" block="true" />
	<blocked dx="-5" dy="-2" block="true" />
	<blocked dx="-4" dy="-7" block="true" />
	<blocked dx="-5" dy="-7" block="true" />
	<blocked dx="-6" dy="-6" block="true" />
	<blocked dx="-6" dy="-5" block="true" />
	<blocked dx="-6" dy="-4" block="true" />
	<blocked dx="-6" dy="-7" block="true" />
	<blocked dx="-3" dy="-7" block="true" />
	<blocked dx="-2" dy="-7" block="true" />
	<blocked dx="-1" dy="-5" block="true" />
	<blocked dx="-2" dy="-6" block="true" />
	<blocked dx="-2" dy="-5" block="true" />
	<blocked dx="-1" dy="-4" block="true" />
	<blocked dx="1" dy="-2" block="true" />
	<blocked dx="1" dy="-3" block="true" />
	<blocked dx="-4" dy="-6" block="true" />
	<blocked dx="-3" dy="-6" block="true" />
	<blocked dx="-5" dy="-6" block="true" />
	<blocked dx="-5" dy="-5" block="true" />
	<blocked dx="-5" dy="-4" block="true" />
	<blocked dx="-5" dy="-3" block="true" />
	<blocked dx="-1" dy="-6" block="true" />
	<blocked dx="0" dy="-5" block="true" />
	<blocked dx="1" dy="-4" block="true" />
	<blocked dx="2" dy="-2" block="true" />
	<blocked dx="3" dy="-1" block="true" />
	<blocked dx="2" dy="-3" block="true" />
	<blocked dx="-1" dy="3" block="true" />
	<blocked dx="0" dy="-3" block="true" />
	<blocked dx="0" dy="-4" block="true" />
	<blocked dx="-3" dy="2" block="true" />
	<blocked dx="-2" dy="3" block="true" />
	<blocked dx="-1" dy="4" block="true" />
	<blocked dx="-4" dy="0" block="true" />
	<blocked dx="3" dy="1" block="true" />
	<blocked dx="4" dy="4" block="true" />
	<blocked dx="4" dy="2" block="true" />
	<blocked dx="3" dy="2" block="true" />

	<blocked dx="-3" dy="3" block="false" />
	<blocked dx="-2" dy="4" block="false" />
	<blocked dx="-1" dy="5" block="false" />
	<blocked dx="0" dy="6" block="false" />
	<blocked dx="2" dy="5" block="false" />
	<blocked dx="2" dy="4" block="false" />
	<blocked dx="3" dy="5" block="false" />
	<blocked dx="5" dy="0" block="false" />
	<blocked dx="4" dy="-1" block="false" />
	<blocked dx="3" dy="-2" block="false" />
	<blocked dx="-5" dy="-1" block="false" />
	<blocked dx="3" dy="4" block="false" />
	<blocked dx="4" dy="0" block="false" />
	<blocked dx="5" dy="2" block="false" />
	<blocked dx="5" dy="1" block="false" />
	<blocked dx="5" dy="4" block="false" />
	<blocked dx="4" dy="5" block="false" />
	<blocked dx="2" dy="6" block="false" />
	<blocked dx="2" dy="7" block="false" />
	<blocked dx="1" dy="7" block="false" />
	<blocked dx="-6" dy="-3" block="false" />
	<blocked dx="-7" dy="-5" block="false" />
	<blocked dx="-7" dy="-6" block="false" />
	<blocked dx="-7" dy="-7" block="false" />
	<blocked dx="-7" dy="-8" block="false" />
	<blocked dx="-6" dy="-8" block="false" />
	<blocked dx="-5" dy="-8" block="false" />
	<blocked dx="-4" dy="-8" block="false" />
	<blocked dx="-3" dy="-8" block="false" />
	<blocked dx="-2" dy="-8" block="false" />
	<blocked dx="-1" dy="-7" block="false" />
	<blocked dx="0" dy="-6" block="false" />
	<blocked dx="5" dy="5" block="false" />
	<blocked dx="5" dy="6" block="false" />
	<blocked dx="4" dy="6" block="false" />
	<blocked dx="3" dy="6" block="false" />
	<blocked dx="2" dy="8" block="false" />
	<blocked dx="1" dy="-5" block="false" />
	<blocked dx="2" dy="-4" block="false" />
	<blocked dx="-4" dy="1" block="false" />
	<blocked dx="4" dy="3" block="false" />
	<blocked dx="5" dy="3" block="false" />
	<blocked dx="6" dy="4" block="false" />
	<blocked dx="6" dy="5" block="false" />
	<blocked dx="8" dy="6" block="false" />

	<door dx="4" dy="3" />

    <!-- materials checked with original -->
	<constructionStack dx="6" dy="5" material="PLANK" buildrequired="3" />
	<constructionStack dx="8" dy="6" material="STONE" buildrequired="9" />
	<offerStack dx="6" dy="4" material="CROP" />

	<bricklayer dx="5" dy="3" direction="NORTH_WEST" />
	<bricklayer dx="2" dy="5" direction="NORTH_WEST" />
	<bricklayer dx="4" dy="5" direction="NORTH_WEST" />
	<bricklayer dx="-2" dy="4" direction="NORTH_EAST" />
	<bricklayer dx="-3" dy="3" direction="NORTH_EAST" />
	<bricklayer dx="-1" dy="5" direction="NORTH_EAST" />

	<flag dx="0" dy="-3" />

	<buildmark dx="4" dy="1" />
	<buildmark dx="4" dy="3" />
	<buildmark dx="1" dy="5" />
	<buildmark dx="-6" dy="-4" />
	<buildmark dx="-4" dy="-7" />
	<buildmark dx="-2" dy="-7" />

	<workcenter dx="13" dy="10"/>

	<image file="24" for="GUI" type="GUI" sequence="69" image="0"/>
    <image file="23" type="SETTLER" for="FINAL" image="0" sequence="17"/>
    <image file="23" type="SETTLER" for="BUILD" image="1" sequence="17"/>

	<startjob name="gohome"/>

	<!-- going home job -->
	<job name="gohome" 			type="GO_TO" 			successjob="hide" 			failjob="waithome" 		dx="4" dy="3"/>
	<job name="waithome" 		type="WAIT" 			successjob="gohome" 		failjob="waithome" 		time="1.0"/>
	<job name="hide" 			type="HIDE" 			successjob="start" 			failjob="start"			/>

	<job name="start" 			type="WAIT" 			successjob="check" 			failjob="check" 		time="8.0"/>
    <job name="check"			type="NOT_FULL"			successjob="presearch1"		failjob="presearch2"	dx="6" dy="4"/>

	<job name="presearch1" 		type="PRE_SEARCH" 		successjob="show1" 			failjob="presearch2" 	dx="4" dy="3" search="CUTTABLE_CORN"/>
	<job name="presearch2" 		type="PRE_SEARCH" 		successjob="show2" 			failjob="start" 		dx="4" dy="3" search="PLANTABLE_CORN"/>

    <!-- 1: cut some corn -->
    <job name="show1"			type="SHOW"				successjob="with_scythe"	failjob="start"			dx="4" dy="3"/>
    <job name="with_scythe"		type="SET_MATERIAL"		successjob="search1"		failjob="gohome"		material="SCYTHE"/>
    <job name="search1"  		type="FOLLOW_SEARCHED"	successjob="cutlook_at_SW"	failjob="hide"			/>

    <job name="cutlook_at_SW"	type="LOOK_AT"			successjob="cut1"			failjob="gohome"		direction="SOUTH_WEST"/>
    <job name="cut1"			type="PLAY_ACTION1"		successjob="cutlook_at_NW"	failjob="gohome"		time="1.0"/>
    <job name="cutlook_at_NW" 	type="LOOK_AT"			successjob="cut2"			failjob="gohome"		direction="NORTH_WEST"/>
    <job name="cut2"			type="PLAY_ACTION1"		successjob="cutlook_at_NE"	failjob="gohome"		time="1.0"/>
    <job name="cutlook_at_NE" 	type="LOOK_AT"			successjob="cut3"			failjob="gohome"		direction="NORTH_EAST"/>
    <job name="cut3"			type="PLAY_ACTION1"		successjob="cutlook_at_SE"	failjob="gohome"		time="1.0"/>
    <job name="cutlook_at_SE" 	type="LOOK_AT"			successjob="cut4"			failjob="gohome"		direction="SOUTH_EAST"/>
    <job name="cut4"			type="PLAY_ACTION1"		successjob="execute1"		failjob="gohome"		time="1.0"/>

    <job name="execute1"		type="EXECUTE"			successjob="look_at"		failjob="gohome"		search="CUTTABLE_CORN"/>
    <job name="look_at"			type="LOOK_AT"			successjob="changeMat2"		failjob="gohome"		direction="NORTH_EAST"/>
	<job name="changeMat2" 		type="SET_MATERIAL" 	successjob="take" 			failjob="gohome" 		material="NO_MATERIAL"/>
    <job name="take" 			type="TAKE" 			successjob="goback" 		failjob="gohome"		material="CROP" 	takeMaterialFromMap="false"/>
	<job name="goback" 			type="GO_TO" 			successjob="look" 			failjob="hide" 			dx="6" dy="4"/>
	<job name="look"			type="LOOK_AT"			successjob="drop"			failjob="hide"			direction="NORTH_EAST"/>
	<job name="drop" 			type="DROP" 			successjob="walk1" 			failjob="hide" 			material="CROP"/>
	<job name="walk1"			type="WALK"				successjob="gohome"			failjob="hide"			direction="WEST"/>

     <!-- 2: plant a new corn -->
    <job name="show2"			type="SHOW"				successjob="with_plant"		failjob="start"			dx="4" dy="3"/>
    <job name="with_plant"		type="SET_MATERIAL"		successjob="search2"		failjob="gohome"		material="PLANT"/>
    <job name="search2"			type="FOLLOW_SEARCHED"	successjob="seedlook_at_NE"	failjob="gohome"		/>
    <job name="seedlook_at_NE"	type="LOOK_AT"			successjob="seed1"			failjob="gohome"		direction="NORTH_EAST"/>
    <job name="seed1"			type="PLAY_ACTION2"		successjob="seedlook_at_SE"	failjob="gohome"		time="1.4"/>
	<job name="seedlook_at_SE"	type="LOOK_AT"			successjob="seed2"			failjob="gohome"		direction="SOUTH_EAST"/>
    <job name="seed2"			type="PLAY_ACTION2"		successjob="seedlook_at_SW"	failjob="gohome"		time="1.4"/>
	<job name="seedlook_at_SW"	type="LOOK_AT"			successjob="seed3"			failjob="gohome"		direction="SOUTH_WEST"/>
    <job name="seed3"			type="PLAY_ACTION2"		successjob="seedlook_at_NW"	failjob="gohome"		time="1.4"/>
	<job name="seedlook_at_NW"	type="LOOK_AT"			successjob="seed4"			failjob="gohome"		direction="NORTH_WEST"/>
    <job name="seed4"			type="PLAY_ACTION2"		successjob="execute2"		failjob="gohome"		time="1.4"/>
	<job name="execute2"		type="EXECUTE"			successjob="no_mat2"		failjob="gohome"		search="PLANTABLE_CORN"/>
 	<job name="no_mat2" 		type="SET_MATERIAL"		successjob="gohome" 		failjob="hide" 			material="NO_MATERIAL"/>

 </building>
