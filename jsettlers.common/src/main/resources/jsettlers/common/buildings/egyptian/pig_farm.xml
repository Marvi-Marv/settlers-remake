<?xml version="1.1" encoding="UTF-8"?>
<!DOCTYPE building SYSTEM "../building.dtd">
<building worker="PIG_FARMER" workradius="0">
	<ground groundtype="GRASS" />
	<ground groundtype="EARTH" />
	<ground groundtype="FLATTENED" />

	<blocked dx="2" dy="5" block="true" />
	<blocked dx="2" dy="4" block="true" />
	<blocked dx="3" dy="5" block="true" />
	<blocked dx="4" dy="5" block="true" />
	<blocked dx="5" dy="3" block="true" />
	<blocked dx="4" dy="4" block="true" />
	<blocked dx="5" dy="2" block="true" />
	<blocked dx="4" dy="3" block="true" />
	<blocked dx="4" dy="2" block="true" />
	<blocked dx="5" dy="1" block="true" />
	<blocked dx="6" dy="2" block="true" />
	<blocked dx="4" dy="1" block="true" />
	<blocked dx="4" dy="0" block="true" />
	<blocked dx="3" dy="-1" block="true" />
	<blocked dx="2" dy="-2" block="true" />
	<blocked dx="1" dy="-2" block="true" />
	<blocked dx="1" dy="-3" block="true" />
	<blocked dx="1" dy="-1" block="true" />
	<blocked dx="1" dy="0" block="true" />
	<blocked dx="0" dy="0" block="true" />
	<blocked dx="0" dy="-1" block="true" />
	<blocked dx="0" dy="-2" block="true" />
	<blocked dx="0" dy="-3" block="true" />
	<blocked dx="-1" dy="-4" block="true" />
	<blocked dx="-2" dy="-4" block="true" />
	<blocked dx="-2" dy="-3" block="true" />
	<blocked dx="-3" dy="-3" block="true" />
	<blocked dx="-3" dy="-4" block="true" />
	<blocked dx="-1" dy="-3" block="true" />
	<blocked dx="-1" dy="-2" block="true" />
	<blocked dx="-1" dy="-1" block="true" />
	<blocked dx="-1" dy="0" block="true" />
	<blocked dx="0" dy="-4" block="true" />
	<blocked dx="-1" dy="1" block="true" />
	<blocked dx="-1" dy="2" block="true" />
	<blocked dx="0" dy="2" block="true" />
	<blocked dx="2" dy="-1" block="true" />
	<blocked dx="3" dy="0" block="true" />
	<blocked dx="3" dy="4" block="true" />
	<blocked dx="0" dy="3" block="true" />
	<blocked dx="6" dy="3" block="true" />
	<blocked dx="6" dy="4" block="true" />
	<blocked dx="6" dy="5" block="true" />
	<blocked dx="5" dy="5" block="true" />
	<blocked dx="5" dy="4" block="true" />
	<blocked dx="3" dy="1" block="true" />
	<blocked dx="2" dy="0" block="true" />
	<blocked dx="2" dy="1" block="true" />
	<blocked dx="3" dy="2" block="true" />
	<blocked dx="3" dy="3" block="true" />
	<blocked dx="2" dy="2" block="true" />
	<blocked dx="2" dy="3" block="true" />
	<blocked dx="1" dy="1" block="true" />
	<blocked dx="1" dy="2" block="true" />
	<blocked dx="0" dy="1" block="true" />
	<blocked dx="1" dy="3" block="true" />
	<blocked dx="-4" dy="1" block="true" />
	<blocked dx="-4" dy="0" block="true" />
	<blocked dx="-4" dy="-2" block="true" />
	<blocked dx="-4" dy="-3" block="true" />
	<blocked dx="-4" dy="-4" block="true" />
	<blocked dx="-6" dy="-4" block="true" />
	<blocked dx="-5" dy="-4" block="true" />
	<blocked dx="-5" dy="-2" block="true" />
	<blocked dx="-6" dy="-3" block="true" />
	<blocked dx="-5" dy="-1" block="true" />
	<blocked dx="5" dy="0" block="true" />
	<blocked dx="4" dy="-1" block="true" />
	<blocked dx="3" dy="-2" block="true" />
	<blocked dx="2" dy="-3" block="true" />
	<blocked dx="1" dy="-4" block="true" />
	<blocked dx="-5" dy="0" block="true" />
	<blocked dx="-6" dy="-1" block="true" />
	<blocked dx="-6" dy="-5" block="true" />
	<blocked dx="-5" dy="-3" block="true" />
	<blocked dx="-4" dy="-1" block="true" />
	<blocked dx="-3" dy="-1" block="true" />
	<blocked dx="-3" dy="-2" block="true" />
	<blocked dx="-2" dy="-2" block="true" />
	<blocked dx="-2" dy="-1" block="true" />
	<blocked dx="-3" dy="0" block="true" />
	<blocked dx="-3" dy="1" block="true" />
	<blocked dx="-2" dy="0" block="true" />
	<blocked dx="-6" dy="-2" block="true" />
	<blocked dx="-3" dy="2" block="true" />

	<blocked dx="3" dy="6" block="false" />
	<blocked dx="4" dy="6" block="false" />
	<blocked dx="5" dy="6" block="false" />
	<blocked dx="7" dy="4" block="false" />
	<blocked dx="7" dy="3" block="false" />
	<blocked dx="7" dy="2" block="false" />
	<blocked dx="6" dy="1" block="false" />
	<blocked dx="0" dy="-5" block="false" />
	<blocked dx="-1" dy="-5" block="false" />
	<blocked dx="-4" dy="-5" block="false" />
	<blocked dx="0" dy="5" block="false" />
	<blocked dx="1" dy="6" block="false" />
	<blocked dx="2" dy="6" block="false" />
	<blocked dx="2" dy="7" block="false" />
	<blocked dx="3" dy="7" block="false" />
	<blocked dx="4" dy="7" block="false" />
	<blocked dx="5" dy="7" block="false" />
	<blocked dx="6" dy="7" block="false" />
	<blocked dx="-1" dy="4" block="false" />
	<blocked dx="-1" dy="3" block="false" />
	<blocked dx="-2" dy="2" block="false" />
	<blocked dx="-2" dy="3" block="false" />
	<blocked dx="1" dy="5" block="false" />
	<blocked dx="1" dy="4" block="false" />
	<blocked dx="7" dy="5" block="false" />
	<blocked dx="7" dy="6" block="false" />
	<blocked dx="7" dy="7" block="false" />
	<blocked dx="-3" dy="-5" block="false" />
	<blocked dx="-2" dy="-5" block="false" />
	<blocked dx="-5" dy="-5" block="false" />
	<blocked dx="-7" dy="-5" block="false" />
	<blocked dx="-7" dy="-4" block="false" />
	<blocked dx="-7" dy="-3" block="false" />
	<blocked dx="-7" dy="-2" block="false" />
	<blocked dx="-7" dy="-1" block="false" />
	<blocked dx="-6" dy="0" block="false" />
	<blocked dx="-3" dy="3" block="false" />
	<blocked dx="-2" dy="4" block="false" />
	<blocked dx="-1" dy="5" block="false" />
	<blocked dx="0" dy="6" block="false" />
	<blocked dx="1" dy="7" block="false" />
	<blocked dx="2" dy="8" block="false" />
	<blocked dx="3" dy="8" block="false" />
	<blocked dx="4" dy="8" block="false" />
	<blocked dx="5" dy="8" block="false" />
	<blocked dx="6" dy="8" block="false" />
	<blocked dx="7" dy="8" block="false" />
	<blocked dx="-8" dy="-7" block="false" />
	<blocked dx="-6" dy="-6" block="false" />
	<blocked dx="-7" dy="-6" block="false" />
	<blocked dx="-6" dy="-7" block="false" />
	<blocked dx="-7" dy="-7" block="false" />
	<blocked dx="1" dy="-5" block="false" />
	<blocked dx="2" dy="-4" block="false" />
	<blocked dx="3" dy="-3" block="false" />
	<blocked dx="4" dy="-2" block="false" />
	<blocked dx="5" dy="-1" block="false" />
	<blocked dx="0" dy="4" block="false" />
	<blocked dx="-5" dy="1" block="false" />
	<blocked dx="-5" dy="2" block="false" />
	<blocked dx="-4" dy="3" block="false" />
	<blocked dx="-6" dy="1" block="false" />
	<blocked dx="-2" dy="1" block="false" />
	<blocked dx="-4" dy="2" block="false" />
	<blocked dx="6" dy="6" block="false" />

	<door dx="1" dy="4" />

	<constructionStack dx="0" dy="5" material="PLANK" buildrequired="3" />
	<constructionStack dx="2" dy="6" material="STONE" buildrequired="9" />
	<requestStack dx="7" dy="3" material="CROP" />
	<requestStack dx="-5" dy="1" material="WATER" />
	<offerStack dx="1" dy="6" material="PIG" />

	<bricklayer dx="2" dy="6" direction="NORTH_EAST" />
	<bricklayer dx="0" dy="4" direction="NORTH_EAST" />
	<bricklayer dx="-6" dy="-2" direction="NORTH_EAST" />
	<bricklayer dx="5" dy="7" direction="NORTH_WEST" />
	<bricklayer dx="7" dy="6" direction="NORTH_WEST" />
	<bricklayer dx="7" dy="4" direction="NORTH_WEST" />

	<flag dx="0" dy="0" />

	<buildmark dx="5" dy="5" />
	<buildmark dx="5" dy="2" />
	<buildmark dx="1" dy="4" />
	<buildmark dx="1" dy="-2" />
	<buildmark dx="-6" dy="-5" />
	<buildmark dx="-6" dy="-4" />

	<image file="24" type="GUI" for="GUI" image="0" sequence="66" />
	<image file="23" type="SETTLER" for="FINAL" image="0" sequence="18" />
	<image file="23" type="SETTLER" for="BUILD" image="1" sequence="18" />

	<startjob name="gohome" />

	<!-- going home job -->
	<job name="gohome" 	type="GO_TO"  	successjob="hide" failjob="hide" dx="1" dy="4"/>
	<job name="hide" 	type="HIDE" 	successjob="wait" failjob="wait" />

	<job name="wait" 			type="WAIT"  		successjob="stackNotFull" 	failjob="stackNotFull" 	time="1"/>
	<job name="stackNotFull" 	type="NOT_FULL" 	successjob="checkPig" 		failjob="checkcrop" 	dx="1" dy="6" 	material="PIG"/>
	<job name="checkPig" 		type="PIG_IS_THERE" successjob="killPig5Show1" 	failjob="checkcrop" 	dx="-3" dy="1"/>
	<job name="checkcrop"  		type="AVAILABLE"   	successjob="checkwater" 	failjob="wait" 			dx="7" dy="3" 	material="CROP"/>
	<job name="checkwater" 		type="AVAILABLE" 	successjob="feedCropShow1" 	failjob="wait" 			dx="-5" dy="1" 	material="WATER"/>

	<!-- get crop from stack to home -->
	<job name="feedCropShow1" 	type="SET_MATERIAL" 	successjob="feedCropShow2" 		failjob="wait" 		material="NO_MATERIAL" />
	<job name="feedCropShow2" 	type="SHOW"  			successjob="feedCropGoTo" 		failjob="hide"  	dx="1" dy="4"/>
	<job name="feedCropGoTo"  	type="GO_TO" 		 	successjob="lookatcrop" 		failjob="gohome"  	dx="7" dy="3" />
	<job name="lookatcrop" 		type="LOOK_AT" 		 	successjob="feedCropTake1" 		failjob="gohome" 	direction="NORTH_WEST"/>
	<job name="feedCropTake1" 	type="TAKE" 			successjob="feedCropTake2" 		failjob="gohome"	material="CROP"  />
	<job name="feedCropTake2" 	type="SET_MATERIAL"		successjob="feedCropGoHome1"	failjob="gohome" 	material="CROP"/>
	<job name="feedCropGoHome1" type="GO_TO"  			successjob="feedCropGoHome2" 	failjob="gohome"	dx="1" dy="4" />
	<job name="feedCropGoHome2" type="HIDE" 			successjob="feedWait" 			failjob="wait" />
	<job name="feedWait" 		type="WAIT"  			successjob="feedWaterShow1" 	failjob="wait" 		time="1"/>

	<!-- get water from stack to home -->
	<job name="feedWaterShow1" 	type="SET_MATERIAL"  	successjob="feedWaterShow2" 	failjob="wait"		material="NO_MATERIAL" />
	<job name="feedWaterShow2" 	type="SHOW"  			successjob="walk1" 				failjob="hide" 		dx="1" dy="4" />
	<job name="walk1"			type="WALK"				successjob="walk2"				failjob="hide"		direction="SOUTH_WEST"/>
	<job name="walk2"			type="WALK"				successjob="walk3"				failjob="hide"		direction="WEST"/>
	<job name="walk3"			type="WALK"				successjob="feedWaterGoTo"		failjob="hide"		direction="WEST"/>
	<job name="feedWaterGoTo" 	type="GO_TO"  			successjob="lookatwater" 		failjob="gohome" 	dx="-5" dy="1"/>
	<job name="lookatwater" 	type="LOOK_AT"  		successjob="feedWaterTake1" 	failjob="gohome" 	direction="NORTH_WEST"/>
	<job name="feedWaterTake1" 	type="TAKE"  			successjob="feedWaterTake2" 	failjob="gohome" 	material="WATER"/>
	<job name="feedWaterTake2" 	type="SET_MATERIAL"  	successjob="feedWaterGoHome1" 	failjob="gohome" 	material="WATER"/>
	<job name="feedWaterGoHome1" type="GO_TO"  			successjob="feedWaterGoHome2"	failjob="gohome"  	dx="-1" dy="5"/>
	<job name="feedWaterGoHome2" type="GO_TO"  			successjob="feedWaterGoHome3"	failjob="gohome"  	dx="1" dy="5"/>
	<job name="feedWaterGoHome3" type="GO_TO"  			successjob="feedWaterGoHome4"	failjob="gohome"  	dx="1" dy="4"/>
	<job name="feedWaterGoHome4" type="HIDE" 			successjob="feedwait" 			failjob="feedWait1" />
	<job name="feedwait" 		 type="WAIT"  			successjob="feed1" 				failjob="wait" 		 time="1"/>

	<!-- feed pigs -->
	<job name="feed1" 		type="SET_MATERIAL"  	successjob="feed2" 			failjob="wait" 	 material="BASKET"/>
	<job name="feed2" 		type="SHOW"  			successjob="feed3" 			failjob="hide" 	 dx="1" dy="4"/>
	<job name="feed3"		type="WALK"				successjob="feed4"			failjob="hide"	 direction="SOUTH_WEST"/>
	<job name="feed4" 		type="GO_TO"  			successjob="feed5" 			failjob="gohome" dx="-2" dy="2"/>
	<job name="feed5" 		type="LOOK_AT" 	 		successjob="feed6" 			failjob="gohome" direction="NORTH_EAST"/>
	<job name="feed6" 		type="PLAY_ACTION1" 	successjob="feed7" 			failjob="gohome" time="2"/>
	<job name="feed7" 		type="GO_TO"  			successjob="feed8" 			failjob="gohome" dx="-2" dy="1"/>
	<job name="feed8" 		type="LOOK_AT" 	 		successjob="feed9" 			failjob="gohome" direction="NORTH_EAST"/>
	<job name="feed9" 		type="PLAY_ACTION1" 	successjob="feed10" 		failjob="gohome" time="2"/>
	<job name="feed10" 		type="GO_TO"  			successjob="feed11" 		failjob="gohome" dx="1" dy="5"/>
	<job name="feed11" 		type="GO_TO"  			successjob="feed12" 		failjob="gohome" dx="1" dy="4"/>
	<job name="feed12" 		type="HIDE" 			successjob="feedWait1"  	failjob="wait" />
	<job name="feedWait1" 	type="WAIT"  			successjob="PIG1_tryplace" 	failjob="wait" 	 time="1"/>

	<!-- place pig -->
	<job name="PIG1_tryplace" type="PIG_IS_THERE" dx="-2" dy="-1" successjob="PIG2_tryplace" failjob="PLACE1" />
	<job name="PIG2_tryplace" type="PIG_IS_THERE" dx="-2" dy="0"  successjob="PIG3_tryplace" failjob="PLACE2" />
	<job name="PIG3_tryplace" type="PIG_IS_THERE" dx="-3" dy="0"  successjob="PIG4_tryplace" failjob="PLACE3" />
	<job name="PIG4_tryplace" type="PIG_IS_THERE" dx="-4" dy="0"  successjob="PIG5_tryplace" failjob="PLACE4" />
	<job name="PIG5_tryplace" type="PIG_IS_THERE" dx="-3" dy="1"  successjob="wait" 		 failjob="PLACE5" />

	<job name="PLACE1" type="PIG_PLACE" dx="-2" dy="-1" successjob="wait" failjob="wait" />
	<job name="PLACE2" type="PIG_PLACE" dx="-2" dy="0"  successjob="wait" failjob="wait" />
	<job name="PLACE3" type="PIG_PLACE" dx="-3" dy="0"  successjob="wait" failjob="wait" />
	<job name="PLACE4" type="PIG_PLACE" dx="-4" dy="0"  successjob="wait" failjob="wait" />
	<job name="PLACE5" type="PIG_PLACE" dx="-3" dy="1"  successjob="wait" failjob="wait" />

	<!-- take pig5 at -3,1 -->
	<job name="killPig5Show1" 	type="SET_MATERIAL" successjob="killPig5Show2" 		failjob="wait" 	 material="NO_MATERIAL"/>
	<job name="killPig5Show2" 	type="SHOW"  		successjob="killPig5walk" 		failjob="hide" 	 dx="1" dy="4"/>
	<job name="killPig5walk"	type="WALK"			successjob="killPig5GoTo"		failjob="hide"	 direction="SOUTH_WEST"/>
	<job name="killPig5GoTo" 	type="GO_TO"  		successjob="lookatpig5" 		failjob="gohome" dx="-2" dy="2"/>
	<job name="lookatpig5" 		type="LOOK_AT"  	successjob="killPig5Kill1" 		failjob="gohome" direction="NORTH_EAST"/>
	<job name="killPig5Kill1" 	type="TAKE"  		successjob="killPig5Kill2" 		failjob="gohome" takeMaterialFromMap="false" material="PIG"/>
	<job name="killPig5Kill2" 	type="PIG_REMOVE"  	successjob="deliverPigToStack1" failjob="gohome" dx="-3" dy="1"/>

	<!-- deliver pig -->
	<job name="deliverPigToStack1" 	type="GO_TO"  	successjob="lookatpig" 			failjob="gohome" dx="1" dy="6"/>
	<job name="lookatpig" 			type="LOOK_AT"  successjob="deliverPigToStack2" failjob="gohome" direction="NORTH_WEST"/>
	<job name="deliverPigToStack2" 	type="DROP"  	successjob="gohome" 			failjob="gohome" material="PIG"/>

</building>
